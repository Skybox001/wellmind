<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Mental Health Support</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(-45deg, #a18cd1, #fbc2eb, #8fd3f4, #84fab0);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      margin: 0;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
      top: 0;
      left: 0;
    }

    .floating-bubble {
      position: absolute;
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      animation: float 8s ease-in-out infinite;
      z-index: 1;
    }

    .floating-bubble:nth-child(2) { top: 10%; left: 15%; animation-delay: 0s; }
    .floating-bubble:nth-child(3) { top: 60%; left: 70%; animation-delay: 3s; }
    .floating-bubble:nth-child(4) { top: 30%; left: 80%; animation-delay: 5s; }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-30px); }
    }

    .container {
      background: rgba(255, 255, 255, 0.12);
      padding: 50px 40px;
      border-radius: 20px;
      backdrop-filter: blur(20px);
      box-shadow: 0 0 40px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 450px;
      text-align: center;
      z-index: 2;
      position: relative;
    }

    .container:hover {
      transform: perspective(600px) rotateY(5deg) rotateX(5deg);
      transition: transform 0.3s;
    }

    h2 {
      margin-bottom: 10px;
      color: #000;
    }

    p {
      font-size: 14px;
      margin-bottom: 20px;
      color: #000000;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
      margin-top: 20px;
    }

    .input-wrapper {
      position: relative;
      width: 85%;
      max-width: 360px;
    }

    input {
      width: 85%;
      padding: 14px 18px;
      padding-right: 40px;
      border: 2px solid #e0e0e0;
      border-radius: 14px;
      background-color: #f9f9f9;
      color: #222;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06), inset 0 1px 2px rgba(255,255,255,0.5);
    }

    input::placeholder {
      color: #aaa;
      font-weight: 370;
    }

    input:focus {
      background-color: #fff;
      border: 2px solid #66a6ff;
      box-shadow: 0 0 0 4px rgba(102, 166, 255, 0.15);
      outline: none;
    }

    .toggle-password {
      position: absolute;
      top: 50%;
      right: 14px;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 18px;
      color: #888;
    }

    button {
      background: linear-gradient(135deg, #89f7fe, #66a6ff);
      color: white;
      padding: 14px 28px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      margin-top: 10px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    button:hover {
      box-shadow: 0 0 20px rgba(102, 166, 255, 0.6);
      transform: scale(1.08);
    }

    a {
      color: #ffffff;
      display: block;
      margin-top: 15px;
      text-decoration: underline;
    }

    @media (max-width: 500px) {
      .container {
        padding: 40px 25px;
      }

      input {
        font-size: 15px;
      }

      button {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>

  <!-- Particle Background -->
  <div id="particles-js"></div>

  <!-- Bubbles -->
  <div class="floating-bubble"></div>
  <div class="floating-bubble"></div>
  <div class="floating-bubble"></div>

  <!-- Flash message -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages %}
      <script>alert("{{ message }}");</script>
    {% endfor %}
  {% endwith %}

  <!-- Login Container -->
  <div class="container">
    <h2>Welcome Back</h2>
    <p>Log in to continue your self-check journey</p>
    <form action="/signup" method="POST">
        <div class="input-wrapper">
          <input type="text" name="username" placeholder="Username" required />
        </div>
        <div class="input-wrapper">
          <input type="password" name="password" placeholder="Password" id="password" required />
          <span class="toggle-password" onclick="togglePassword()">üëÅÔ∏è</span>
        </div>
        <button type="submit">Sign Up</button>
      </form>
      <a href="/login">Already have an account? Log in</a>
      
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 60, "density": { "enable": true, "value_area": 800 }},
        "color": { "value": "#111111" },
        "shape": { "type": "circle" },
        "opacity": { "value": 0.7 },
        "size": { "value": 3, "random": true },
        "line_linked": {
          "enable": true,
          "distance": 130,
          "color": "#111111",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 1.2,
          "direction": "none",
          "out_mode": "out"
        }
      },
      "interactivity": {
        "events": {
          "onhover": { "enable": true, "mode": "grab" },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 180,
            "line_linked": { "opacity": 0.5 }
          }
        }
      },
      "retina_detect": true
    });

    function togglePassword() {
      const passField = document.getElementById("password");
      passField.type = passField.type === "password" ? "text" : "password";
    }

    // Confetti trigger if login was successful
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("login") === "success") {
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
      });
    }
  </script>

</body>
</html>
